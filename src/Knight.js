var React = require('react');
var PropTypes = React.PropTypes;
var ItemTypes = require('./Constants').ItemTypes;
var DragSource = require('react-dnd').DragSource;
var fs =  require('fs');

var knightSource = {
  beginDrag: function (props) {
    return {};
  }
};

function collect(connect, monitor) {
  return { connectDragSource: connect.dragSource(),
    connectDragPreview: connect.dragPreview(),
    isDragging: monitor.isDragging(),
    connectDragSource: connect.dragSource()
  }
}

var Knight = React.createClass({
  propTypes: {
    connectDragSource: PropTypes.func.isRequired,
    isDragging: PropTypes.bool.isRequired,
    connectDragPreview: PropTypes.func.isRequired
  },

  componentDidMount: function () {
    var connectDragPreview = this.props.connectDragPreview;
    var img = new Image();

    img.src = 'data:image/jpeg;base64,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';

    img.onload = function () {
      connectDragPreview(img);
    };
},

  render: function () {
    var connectDragSource = this.props.connectDragSource;
    var isDragging = this.props.isDragging;

    return connectDragSource(
      <div style={{
        opacity: isDragging ? 0.5 : 1,
        fontSize: 25,
        fontWeight: 'bold',
        cursor: 'move'
      }}>
        â™˜
      </div>
    );
  }
});

module.exports = DragSource(ItemTypes.KNIGHT, knightSource, collect)(Knight);
